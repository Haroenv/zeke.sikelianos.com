<!DOCTYPE html>
<html>

<head>
  <title>Zeke Sikelianos, Designer/Developer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/devicons/1.8.0/css/devicons.min.css">
  <link rel="stylesheet" href="/styles/index.css">

  <script src="/scripts/index.js"></script>
</head>

<body>

    <div class="color-bar">
        <div style="background:#edebeb;"></div>
        <div style="background:#28b0dd;"></div>
        <div style="background:#ffffff;"></div>
        <div style="background:#28b0dd;"></div>
        <div style="background:#ffffff;"></div>
    </div>

    <div class="breadcrumbs muted">
      <a href="/">zeke.sikelianos.com</a>
          / <a href="/#posts" class="lowercase">Posts</a>
    </div>

  <article>
    <div class="page-content">
      <header>
        <h1>Objecty Arrays in JavaScript</h1>
          <h2>Can we have our cake and eat it too?</h2>
      </header>

      <meta name="title" content="Objecty Arrays in JavaScript"><meta name="description" content="Can we have our cake and eat it too?"><!--
title: Objecty Arrays in JavaScript
description: Can we have our cake and eat it too?
-->
<figure>
  <img src="/posts/keyed-arrays-in-javascript/arrays-vs-objects.svg">
</figure>
<p>A question often comes up for me when I&apos;m designing a JavaScript or JSON data structure: &quot;Should I use an Array or an Object for this?&quot; Sometimes the answer is obvious. Sometimes it&apos;s hard to know which is better.</p>
<p>This short post proposes One Weird Trick&#x2122; for adding a bit of sugar to Arrays, using plain old JavaScript.</p>
<h2 id="the-data" class="deep-link"><a href="#the-data">The Data</a></h2>
<p>Imagine you&apos;re building a JSON webservice that will return a collection of people. Each person is an object:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;id</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>bob</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre></code></pre>
<h2 id="approach-1-array-style" class="deep-link"><a href="#approach-1-array-style">Approach #1: &apos;Array&apos; Style</a></h2>
<p>You could structure the JSON response as an array:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>people&#xA0;</span><span class="keyword operator js"><span>=</span></span><span>&#xA0;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>id</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>bob</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>id</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>sue</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Sue</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>id</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>hal</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Hal</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>id</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>ann</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Ann</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span></span></div></pre></code></pre>
<p>This is nice because <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Arrays have lots of   methods</a> for dealing with collections, like <code>forEach</code>, <code>map</code>, and <code>sort</code>. Gathering up the names of all the cool people is pretty easy:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>people</span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta delimiter method period js"><span>.</span></span><span>filter</span><span class="meta brace round js"><span>(</span></span><span>person&#xA0;</span><span class="keyword operator js"><span>=</span><span>&gt;</span></span><span>&#xA0;person</span><span class="meta delimiter method period js"><span>.</span></span><span>isCool</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta delimiter method period js"><span>.</span></span><span>map</span><span class="meta brace round js"><span>(</span></span><span>person&#xA0;</span><span class="keyword operator js"><span>=</span><span>&gt;</span></span><span>&#xA0;person</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>name</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<p>But when you want a person with a specific id, you have to do something like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>people</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>find</span></span><span class="meta brace round js"><span>(</span></span><span>person&#xA0;</span><span class="keyword operator js"><span>=</span><span>&gt;</span></span><span>&#xA0;person</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>id</span></span><span>&#xA0;</span><span class="keyword operator js"><span>===</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>bob</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<p>Kind of cumbersome. A simple <code>people.bob</code> would be more convenient.</p>
<h2 id="approach-2-object-style" class="deep-link"><a href="#approach-2-object-style">Approach 2: &apos;Object&apos; Style</a></h2>
<p>Instead of storing the id in the object, use it as a key:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>people&#xA0;</span><span class="keyword operator js"><span>=</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;bob</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;sue</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Sue</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;hal</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Hal</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;ann</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="meta brace curly js"><span>{</span></span><span>name</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>Ann</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&#xA0;isCool</span><span class="keyword operator js"><span>:</span></span><span>&#xA0;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre></code></pre>
<p>The nice thing about this structure is that you can easily access a person if you know their id:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>people</span><span class="meta delimiter method period js"><span>.</span></span><span>bob</span></span></div></pre></code></pre>
<p>The drawback of this structure is that it&apos;s more cumbersome to iterate over an Object than an Array. The code for fetching the names of cool people now looks like this:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="support class js"><span>Object</span></span><span class="meta delimiter method period js"><span>.</span></span><span>keys</span><span class="meta brace round js"><span>(</span></span><span>people</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta delimiter method period js"><span>.</span></span><span>filter</span><span class="meta brace round js"><span>(</span></span><span>id&#xA0;</span><span class="keyword operator js"><span>=</span><span>&gt;</span></span><span>&#xA0;people</span><span class="meta brace square js"><span>[</span></span><span>id</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span>isCool</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&#xA0;&#xA0;</span><span class="meta delimiter method period js"><span>.</span></span><span>map</span><span class="meta brace round js"><span>(</span></span><span>id&#xA0;</span><span class="keyword operator js"><span>=</span><span>&gt;</span></span><span>&#xA0;people</span><span class="meta brace square js"><span>[</span></span><span>id</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>name</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<p>Not so great.</p>
<h2 id="approach-3-the-experimental-hybrid-array" class="deep-link"><a href="#approach-3-the-experimental-hybrid-array">Approach 3: The Experimental Hybrid Array</a></h2>
<p>Here&apos;s the crazy idea: Use an Array of person objects,
but iterate over it once at load time, assigning a key
for each person&apos;s id:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>people</span><span class="meta delimiter method period js"><span>.</span></span><span>forEach</span><span class="meta brace round js"><span>(</span></span><span>person&#xA0;</span><span class="keyword operator js"><span>=</span><span>&gt;</span></span><span>&#xA0;people</span><span class="meta brace square js"><span>[</span></span><span>person</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>id</span></span><span class="meta brace square js"><span>]</span></span><span>&#xA0;</span><span class="keyword operator js"><span>=</span></span><span>&#xA0;person</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<p>This way it&apos;s still an array:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="support class js"><span>Array</span></span><span class="meta delimiter method period js"><span>.</span></span><span>isArray</span><span class="meta brace round js"><span>(</span></span><span>people</span><span class="meta brace round js"><span>)</span></span><span>&#xA0;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&#xA0;=&gt;&#xA0;true</span><span>&#xA0;</span></span></span></div><div class="line"><span class="source js"><span>people</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>0</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>name</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&#xA0;=&gt;&#xA0;Bob</span><span>&#xA0;</span></span></span></div><div class="line"><span class="source js"><span>people</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>length</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&#xA0;=&gt;&#xA0;4</span><span>&#xA0;</span></span></span></div></pre></code></pre>
<p>But there&apos;s now a named key for each person, so content is now addressable by id:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>people</span><span class="meta delimiter method period js"><span>.</span></span><span>bob</span><span class="meta delimiter method period js"><span>.</span></span><span>isCool&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&#xA0;=&gt;&#xA0;true</span><span>&#xA0;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&apos;</span></span><span>sue</span><span class="punctuation definition string end js"><span>&apos;</span></span></span><span>&#xA0;</span><span class="keyword operator js"><span>in</span></span><span>&#xA0;people</span><span class="meta brace round js"><span>)</span></span><span>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&#xA0;=&gt;&#xA0;true</span><span>&#xA0;</span></span></span></div></pre></code></pre>
<p>This is kind of the best of both worlds, but there are a few drawbacks. <code>Object.keys(people).length</code> is no longer reliable, as it returns both the numeric keys of the array and the named keys we assigned:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="support class js"><span>Object</span></span><span class="meta delimiter method period js"><span>.</span></span><span>keys</span><span class="meta brace round js"><span>(</span></span><span>people</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&#xA0;=&gt;&#xA0;[&apos;0&apos;,&#xA0;&apos;1&apos;,&#xA0;&apos;2&apos;,&#xA0;&apos;3&apos;,&#xA0;&apos;bob&apos;,&#xA0;&apos;sue&apos;,&#xA0;&apos;hal&apos;,&#xA0;&apos;ann&apos;]</span><span>&#xA0;</span></span></span></div></pre></code></pre>
<p>Also <code>JSON.stringify</code> will produce undesirable results. But if those two drawbacks are not important for your use case, this little technique could fit your needs.</p>
<p>If you found this useful, <a href="mailto:zeke@sikelianos.com">let me know</a>. If you think it&apos;s a bad idea, <a href="(mailto:zeke@sikelianos.com)">tell me why</a>.</p>

    </div>
  </article>

  <footer>

      <div class="breadcrumbs muted">
        <a href="/">zeke.sikelianos.com</a>
            &#xFFEB; <a href="/#posts" class="lowercase">Posts</a>
      </div>

    <div id="footer-social-nav">
      <a href="http://twitter.com/zeke" rel="tipsy" title="@zeke on Twitter">
        <span class="fa fa-twitter"></span>
        <span class="text">zeke on twitter</span>
      </a>
      <a href="http://github.com/zeke" rel="tipsy" title="@zeke on GitHub">
        <span class="devicons devicons-github_badge"></span>
        <span class="text">zeke on GitHub</span>
      </a>
      <a href="http://npmjs.com/~zeke" rel="tipsy" title="~zeke on npm">
        <span class="devicons devicons-npm"></span>
        <span class="text">zeke on npm</span>
      </a>
      <a href="https://rubygems.org/profiles/sikelianos" rel="tipsy" title="sikelianos on Rubygems">
        <span class="devicons devicons-ruby_rough"></span>
        <span class="text">sikelianos on Rubygems</span>
      </a>
      <a href="https://www.flickr.com/photos/sikelianos/sets" rel="tipsy" title="sikelianos on Flickr">
        <span class="fa fa-flickr"></span>
        <span class="text">sikelianos on Flickr</span>
      </a>
      <a href="https://www.instagram.com/sikelianos/" rel="tipsy" title="sikelianos on Instagram">
        <span class="fa fa-instagram"></span>
        <span class="text">sikelianos on Instagram</span>
      </a>
    </div>
  </footer>
</body>
</html>
